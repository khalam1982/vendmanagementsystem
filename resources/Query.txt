<Resource auth="Container" description="DB Connection"
		driverClass="oracle.jdbc.driver.OracleDriver" maxPoolSize="20" minPoolSize="10"
		acquireIncrement="1" name="jdbc/PrepaymentDB" user="PREPAY_SCHEMA"
		password="cr1ck3t" factory="org.apache.naming.factory.BeanFactory"
		type="com.mchange.v2.c3p0.ComboPooledDataSource" jdbcUrl="jdbc:oracle:thin:@10.13.6.114:1525:DVCPPY01"
		acquireRetryAttempts="1" />
	<Resource name="bean/HeadendDetails" auth="Container"
		type="com.centrica.vms.scheduler.external.model.HeadendDetails" factory="org.apache.naming.factory.BeanFactory"
		url="http://localhost:8080/VMSTestClient/services/UnityService?wsdl" userName="trilliant" password="trilliant" timeout="1000"
		noofretries="5" retryPeriod="10,600,9000,9000,9000"/>


mysql.exe -u prepayment -p prepayment --- To connect to Mysql.

mysqld.exe -- console  ----- To start the server



<!--CREATE TABLE METER_DETAILS (MSN VARCHAR(30) PRIMARY KEY,PAN VARCHAR(30) UNIQUE NOT NULL,PPKEY VARCHAR(40) NOT NULL,FUELTYPE VARCHAR(20) NOT NULL);-->
CREATE TABLE METER_DETAILS (MSN VARCHAR(30) PRIMARY KEY,PPKEY VARCHAR(40) NOT NULL,FUELTYPE VARCHAR(20) NOT NULL);


CREATE TABLE VEND_CREDITID (MSN VARCHAR(30),TRANSACTION_TYPE VARCHAR(30),CREDITID INTEGER NOT NULL,PRIMARY KEY (MSN, TRANSACTION_TYPE));

CREATE TABLE STATUS_DETAILS(STATUS_CODE INTEGER PRIMARY KEY,STATUS_DESCRIPTION VARCHAR(100));

CREATE TABLE SOURCE_DETAILS (SOURCE VARCHAR(30) PRIMARY KEY,HOLDING_PERIOD INTEGER NOT NULL,SOURCE_DESCRIPTION VARCHAR(50), MAX_VEND NUMBER(5), MAX_VEND_CONFIG NUMBER(1));

CREATE TABLE VMS_FUNCTION (FUNCTION_CODE VARCHAR2(2) PRIMARY KEY,FUNCTION_DESCRIPTION VARCHAR(100) NOT NULL);

CREATE TABLE VMS_GROUP (GROUP_ID VARCHAR2(2) PRIMARY KEY,GROUP_DESCRIPTION VARCHAR(30) NOT NULL);

CREATE TABLE VMS_USER (USER_ID INTEGER PRIMARY KEY,USERNAME VARCHAR2(20) UNIQUE NOT NULL,
LAN_ID VARCHAR2(20) NOT NULL,GROUP_ID VARCHAR2(5) NOT NULL,RETRY_COUNT INTEGER DEFAULT 0,
LOCK_IND CHAR DEFAULT 'N',SUPER_IND CHAR DEFAULT 'N',PASSWORD_DATE TIMESTAMP NOT NULL,
POWER_IND CHAR DEFAULT 'N',CREATED_BY VARCHAR2(20) NOT NULL,UPDATED_BY VARCHAR2(20) NOT NULL,
CREATED_TIMESTAMP TIMESTAMP NOT NULL,UPDATED_TIMESTAMP TIMESTAMP NOT NULL,PASSWORD VARCHAR2(20) NOT NULL,VERSION INTEGER NOT NULL,
FOREIGN KEY (GROUP_ID) REFERENCES VMS_GROUP(GROUP_ID));

CREATE TABLE VMS_USERFUNCTION (ID INTEGER PRIMARY KEY,USER_ID INTEGER,FUNCTION_CODE 
VARCHAR2(2) NOT NULL, GROUP_ID VARCHAR2(2) NOT NULL,FOREIGN KEY (GROUP_ID) REFERENCES VMS_GROUP(GROUP_ID)
,FOREIGN KEY (USER_ID) REFERENCES VMS_USER(USER_ID),FOREIGN KEY (FUNCTION_CODE) REFERENCES 
VMS_FUNCTION(FUNCTION_CODE),UNIQUE(USER_ID,FUNCTION_CODE));

CREATE SEQUENCE SEQ_VMS_USER MINVALUE 1;
CREATE SEQUENCE SEQ_VMS_USERFUNCTION;

CREATE TABLE VEND_TRANSACTION (TRANSACTION_ID VARCHAR(20) PRIMARY KEY,PAN VARCHAR(30),VENDCODE VARCHAR(40),
TRANSACTION_TYPE VARCHAR2(30) NOT NULL,STATUS INTEGER,TRIGGER_NAME VARCHAR(50),MSN VARCHAR(30),
HOLDING_PERIOD INTEGER,SOURCE VARCHAR(30),ORIGINAL_TRANSACTION_ID VARCHAR(20),UPDATED_TIMESTAMP TIMESTAMP,
CREATED_BY VARCHAR(20),UPDATED_BY VARCHAR(20),VERSION INTEGER NOT NULL,FOREIGN KEY (STATUS) 
REFERENCES STATUS_DETAILS(STATUS_CODE),FOREIGN KEY (SOURCE) REFERENCES SOURCE_DETAILS(SOURCE));


CREATE_TABLE CUSTOMER_DETAILS (PAN VARCHAR2(19) PRIMARY KEY, VALID_FROM DATE, VALID_TO DATE, MPXN VARCHAR2(13), 
CREATED_BY VARCHAR2(20), UPDATED_BY VARCHAR2(20), CREATED_TIMESTAMP TIMESTAMP, UPDATED_TIMESTAMP TIMESTAMP); 

CREATE_TABLE METER_DETAILS (MSN VARCHAR2(14) PRIMARY_KEY, PPKEY VARCHAR2(32), FUEL_TYPE_ID INTEGER, DEVICE_TYPE_ID INTEGER, 
MANUFACT_TYPE_ID INTEGER, CREATED_BY_ID VARCHAR2(20), CREATED_DT TIMESTAMP(6), LAST_UPDATED_BY_ID VARCHAR2(20), 
LAST_UPDATED_DT TIMESTAMP(6) FOREIGN_KEY (FUEL_TYPE_ID, MANUFACT_TYPE_ID, DEVICE_TYPE_ID), REFERENCES FUEL_CATEGORY(FUEL_TYPE_ID),
REFERENCES MANUFACT_CATEGORY(MANUFACT_TYPE_ID), REFERENCES DEVICE_CATEGORY(DEVICE_TYPE_ID));

CREATE_TABLE PREMISE_DETAILS (MPXN VARCHAR2(20) PRIMARY_KEY, MSN VARCHAR2(20), METER_MODE VARCHAR2(2),
LASTUPDATEDDATE TIMESTAMP(6));

ALTER TABLE PREMISE_DETAILS ADD(CREATED_BY VARCHAR2(20), UPDATED_BY VARCHAR2(20), CREATED_TIMESTAMP TIMESTAMP, 
UPDATED_TIMESTAMP TIMESTAMP);

delete from qrtz_job_listeners;
delete from qrtz_trigger_listeners;
delete from qrtz_fired_triggers;
delete from qrtz_simple_triggers;
delete from qrtz_cron_triggers;
delete from qrtz_blob_triggers;
delete from qrtz_triggers;
delete from qrtz_job_details;
delete from qrtz_calendars;
delete from qrtz_paused_trigger_grps;
delete from qrtz_locks;
delete from qrtz_scheduler_state;

drop table qrtz_calendars;
drop table qrtz_fired_triggers;
drop table qrtz_trigger_listeners;
drop table qrtz_blob_triggers;
drop table qrtz_cron_triggers;
drop table qrtz_simple_triggers;
drop table qrtz_triggers;
drop table qrtz_job_listeners;
drop table qrtz_job_details;
drop table qrtz_paused_trigger_grps;
drop table qrtz_locks;
drop table qrtz_scheduler_state;


CREATE TABLE qrtz_job_details
  (
    JOB_NAME  VARCHAR2(200) NOT NULL,
    JOB_GROUP VARCHAR2(200) NOT NULL,
    DESCRIPTION VARCHAR2(250) NULL,
    JOB_CLASS_NAME   VARCHAR2(250) NOT NULL, 
    IS_DURABLE VARCHAR2(1) NOT NULL,
    IS_VOLATILE VARCHAR2(1) NOT NULL,
    IS_STATEFUL VARCHAR2(1) NOT NULL,
    REQUESTS_RECOVERY VARCHAR2(1) NOT NULL,
    JOB_DATA BLOB NULL,
    PRIMARY KEY (JOB_NAME,JOB_GROUP)
);
CREATE TABLE qrtz_job_listeners
  (
    JOB_NAME  VARCHAR2(200) NOT NULL, 
    JOB_GROUP VARCHAR2(200) NOT NULL,
    JOB_LISTENER VARCHAR2(200) NOT NULL,
    PRIMARY KEY (JOB_NAME,JOB_GROUP,JOB_LISTENER),
    FOREIGN KEY (JOB_NAME,JOB_GROUP) 
	REFERENCES QRTZ_JOB_DETAILS(JOB_NAME,JOB_GROUP)
);
CREATE TABLE qrtz_triggers
  (
    TRIGGER_NAME VARCHAR2(200) NOT NULL,
    TRIGGER_GROUP VARCHAR2(200) NOT NULL,
    JOB_NAME  VARCHAR2(200) NOT NULL, 
    JOB_GROUP VARCHAR2(200) NOT NULL,
    IS_VOLATILE VARCHAR2(1) NOT NULL,
    DESCRIPTION VARCHAR2(250) NULL,
    NEXT_FIRE_TIME NUMBER(13) NULL,
    PREV_FIRE_TIME NUMBER(13) NULL,
    PRIORITY NUMBER(13) NULL,
    TRIGGER_STATE VARCHAR2(16) NOT NULL,
    TRIGGER_TYPE VARCHAR2(8) NOT NULL,
    START_TIME NUMBER(13) NOT NULL,
    END_TIME NUMBER(13) NULL,
    CALENDAR_NAME VARCHAR2(200) NULL,
    MISFIRE_INSTR NUMBER(2) NULL,
    JOB_DATA BLOB NULL,
    PRIMARY KEY (TRIGGER_NAME,TRIGGER_GROUP),
    FOREIGN KEY (JOB_NAME,JOB_GROUP) 
	REFERENCES QRTZ_JOB_DETAILS(JOB_NAME,JOB_GROUP) 
);
CREATE TABLE qrtz_simple_triggers
  (
    TRIGGER_NAME VARCHAR2(200) NOT NULL,
    TRIGGER_GROUP VARCHAR2(200) NOT NULL,
    REPEAT_COUNT NUMBER(7) NOT NULL,
    REPEAT_INTERVAL NUMBER(12) NOT NULL,
    TIMES_TRIGGERED NUMBER(10) NOT NULL,
    PRIMARY KEY (TRIGGER_NAME,TRIGGER_GROUP),
    FOREIGN KEY (TRIGGER_NAME,TRIGGER_GROUP) 
	REFERENCES QRTZ_TRIGGERS(TRIGGER_NAME,TRIGGER_GROUP)
);
CREATE TABLE qrtz_cron_triggers
  (
    TRIGGER_NAME VARCHAR2(200) NOT NULL,
    TRIGGER_GROUP VARCHAR2(200) NOT NULL,
    CRON_EXPRESSION VARCHAR2(120) NOT NULL,
    TIME_ZONE_ID VARCHAR2(80),
    PRIMARY KEY (TRIGGER_NAME,TRIGGER_GROUP),
    FOREIGN KEY (TRIGGER_NAME,TRIGGER_GROUP) 
	REFERENCES QRTZ_TRIGGERS(TRIGGER_NAME,TRIGGER_GROUP)
);
CREATE TABLE qrtz_blob_triggers
  (
    TRIGGER_NAME VARCHAR2(200) NOT NULL,
    TRIGGER_GROUP VARCHAR2(200) NOT NULL,
    BLOB_DATA BLOB NULL,
    PRIMARY KEY (TRIGGER_NAME,TRIGGER_GROUP),
    FOREIGN KEY (TRIGGER_NAME,TRIGGER_GROUP) 
        REFERENCES QRTZ_TRIGGERS(TRIGGER_NAME,TRIGGER_GROUP)
);
CREATE TABLE qrtz_trigger_listeners
  (
    TRIGGER_NAME  VARCHAR2(200) NOT NULL, 
    TRIGGER_GROUP VARCHAR2(200) NOT NULL,
    TRIGGER_LISTENER VARCHAR2(200) NOT NULL,
    PRIMARY KEY (TRIGGER_NAME,TRIGGER_GROUP,TRIGGER_LISTENER),
    FOREIGN KEY (TRIGGER_NAME,TRIGGER_GROUP) 
	REFERENCES QRTZ_TRIGGERS(TRIGGER_NAME,TRIGGER_GROUP)
);
CREATE TABLE qrtz_calendars
  (
    CALENDAR_NAME  VARCHAR2(200) NOT NULL, 
    CALENDAR BLOB NOT NULL,
    PRIMARY KEY (CALENDAR_NAME)
);
CREATE TABLE qrtz_paused_trigger_grps
  (
    TRIGGER_GROUP  VARCHAR2(200) NOT NULL, 
    PRIMARY KEY (TRIGGER_GROUP)
);
CREATE TABLE qrtz_fired_triggers 
  (
    ENTRY_ID VARCHAR2(95) NOT NULL,
    TRIGGER_NAME VARCHAR2(200) NOT NULL,
    TRIGGER_GROUP VARCHAR2(200) NOT NULL,
    IS_VOLATILE VARCHAR2(1) NOT NULL,
    INSTANCE_NAME VARCHAR2(200) NOT NULL,
    FIRED_TIME NUMBER(13) NOT NULL,
    PRIORITY NUMBER(13) NOT NULL,
    STATE VARCHAR2(16) NOT NULL,
    JOB_NAME VARCHAR2(200) NULL,
    JOB_GROUP VARCHAR2(200) NULL,
    IS_STATEFUL VARCHAR2(1) NULL,
    REQUESTS_RECOVERY VARCHAR2(1) NULL,
    PRIMARY KEY (ENTRY_ID)
);
CREATE TABLE qrtz_scheduler_state 
  (
    INSTANCE_NAME VARCHAR2(200) NOT NULL,
    LAST_CHECKIN_TIME NUMBER(13) NOT NULL,
    CHECKIN_INTERVAL NUMBER(13) NOT NULL,
    PRIMARY KEY (INSTANCE_NAME)
);
CREATE TABLE qrtz_locks
  (
    LOCK_NAME  VARCHAR2(40) NOT NULL, 
    PRIMARY KEY (LOCK_NAME)
);
INSERT INTO qrtz_locks values('TRIGGER_ACCESS');
INSERT INTO qrtz_locks values('JOB_ACCESS');
INSERT INTO qrtz_locks values('CALENDAR_ACCESS');
INSERT INTO qrtz_locks values('STATE_ACCESS');
INSERT INTO qrtz_locks values('MISFIRE_ACCESS');
create index idx_qrtz_j_req_recovery on qrtz_job_details(REQUESTS_RECOVERY) TABLESPACE I_BGSM_PPY01;
create index idx_qrtz_t_next_fire_time on qrtz_triggers(NEXT_FIRE_TIME) TABLESPACE I_BGSM_PPY01;
create index idx_qrtz_t_state on qrtz_triggers(TRIGGER_STATE) TABLESPACE I_BGSM_PPY01;
create index idx_qrtz_t_nft_st on qrtz_triggers(NEXT_FIRE_TIME,TRIGGER_STATE) TABLESPACE I_BGSM_PPY01;
create index idx_qrtz_t_volatile on qrtz_triggers(IS_VOLATILE) TABLESPACE I_BGSM_PPY01;
create index idx_qrtz_ft_trig_name on qrtz_fired_triggers(TRIGGER_NAME) TABLESPACE I_BGSM_PPY01;
create index idx_qrtz_ft_trig_group on qrtz_fired_triggers(TRIGGER_GROUP) TABLESPACE I_BGSM_PPY01;
create index idx_qrtz_ft_trig_nm_gp on qrtz_fired_triggers(TRIGGER_NAME,TRIGGER_GROUP) TABLESPACE I_BGSM_PPY01;
create index idx_qrtz_ft_trig_volatile on qrtz_fired_triggers(IS_VOLATILE) TABLESPACE I_BGSM_PPY01;
create index idx_qrtz_ft_trig_inst_name on qrtz_fired_triggers(INSTANCE_NAME) TABLESPACE I_BGSM_PPY01;
create index idx_qrtz_ft_job_name on qrtz_fired_triggers(JOB_NAME) TABLESPACE I_BGSM_PPY01;
create index idx_qrtz_ft_job_group on qrtz_fired_triggers(JOB_GROUP) TABLESPACE I_BGSM_PPY01;
create index idx_qrtz_ft_job_stateful on qrtz_fired_triggers(IS_STATEFUL) TABLESPACE I_BGSM_PPY01;
create index idx_qrtz_ft_job_req_recovery on qrtz_fired_triggers(REQUESTS_RECOVERY) TABLESPACE I_BGSM_PPY01;




INSERT INTO STATUS_DETAILS VALUES (10, ‘INVALID PP KEY’);
INSERT INTO STATUS_DETAILS VALUES (15, ‘INCORRECT CREDIT VALUE’);
INSERT INTO STATUS_DETAILS VALUES (20, ‘VMS DATABASE DOWN);
INSERT INTO STATUS_DETAILS VALUES (25, ‘INVALID LICENSE EXCEPTION’);
INSERT INTO STATUS_DETAILS VALUES (30, ‘L+G BLACK BOX ERROR’);
INSERT INTO STATUS_DETAILS VALUES (35, ‘UNKNOWN ERROR’);
INSERT INTO STATUS_DETAILS VALUES (40, ‘INVALID PAN NUMBER’);
INSERT INTO STATUS_DETAILS VALUES (45, ‘PAN NOT FOUND’);
INSERT INTO STATUS_DETAILS VALUES (50, ‘INVALID HOLDING PERIOD’);
INSERT INTO STATUS_DETAILS VALUES (55, ‘INVALID SOURCE’);
INSERT INTO STATUS_DETAILS VALUES (60, ‘INVALID MSN’);
INSERT INTO STATUS_DETAILS VALUES (65, ‘MPXN NOT FOUND’);
INSERT INTO STATUS_DETAILS VALUES (70, ‘MANUFACTURER TYPE NOT FOUND’);
INSERT INTO STATUS_DETAILS VALUES (75, ‘DEVICE TYPE NOT FOUND’);
INSERT INTO STATUS_DETAILS VALUES (100,'HEADEND_RECEIVED BY METER');
INSERT INTO STATUS_DETAILS VALUES (105,'REJECTED ERROR');
INSERT INTO STATUS_DETAILS VALUES (106,'REJECTED DUPLICATE TOP UP');
INSERT INTO STATUS_DETAILS VALUES (107,'REJECTED KEYPAD LOCK');
INSERT INTO STATUS_DETAILS VALUES (108,'REJECTED MAX CREDIT REACHED');
INSERT INTO STATUS_DETAILS VALUES (109,'REJECTED UNKNOWN');
INSERT INTO STATUS_DETAILS VALUES (110,'HEADEND_NOT RECEIVED BY METER');
INSERT INTO STATUS_DETAILS VALUES (115,'VENDCODE GENERATED');
INSERT INTO STATUS_DETAILS VALUES (120,'VENDCODE IN HOLDING PEN');
INSERT INTO STATUS_DETAILS VALUES (125,'UNSENT TO HEADEND');
INSERT INTO STATUS_DETAILS VALUES (130,'REVERSED');
INSERT INTO STATUS_DETAILS VALUES (135,'VOIDED THE REVERSAL');
INSERT INTO STATUS_DETAILS VALUES (140,'VOIDED VEND CODE IN HOLDING PEN');
INSERT INTO STATUS_DETAILS VALUES (145,'VOIDED VENDCODE SENT TO HEADEND');
INSERT INTO STATUS_DETAILS VALUES (150,'REVERSAL ACCEPTED');
INSERT INTO STATUS_DETAILS VALUES (155,'REVERSAL REJECTED');
INSERT INTO STATUS_DETAILS VALUES (160,'VOID ACCEPTED');
INSERT INTO STATUS_DETAILS VALUES (165,'VOID REJECTED');
INSERT INTO STATUS_DETAILS VALUES (200,'SENT TO HEADEND');
INSERT INTO STATUS_DETAILS VALUES (300,'HEADEND_UNHANDLED ERROR');
INSERT INTO STATUS_DETAILS VALUES (310,'HEADEND_DEVICE DOES N0T EXIST');
INSERT INTO STATUS_DETAILS VALUES (320,'HEADEND_MULTIPLE DEVICE EXIST');
INSERT INTO STATUS_DETAILS VALUES (330,'HEADEND_DEVICE NOT ACTIVE');
INSERT INTO STATUS_DETAILS VALUES (340,'HEADEND_DEVICE NOT CONNECTED');
INSERT INTO STATUS_DETAILS VALUES (350,'HEADEND_DEVICE NOT IN PREPAYMENT MODE');
INSERT INTO STATUS_DETAILS VALUES ('95', 'INVALID REQUEST DATE');
INSERT INTO STATUS_DETAILS VALUES ('96', 'VEND TRANSACTION SUSPENDED FOR METER’);
INSERT INTO STATUS_DETAILS VALUES (90,'EXCEEDS_MAX_VEND_FOR_SOURCE');
INSERT INTO STATUS_DETAILS VALUES ('515', 'PP KEY REQUEST ACCEPTED');
INSERT INTO STATUS_DETAILS VALUES ('520', 'PP KEY IN HOLDING PEN');
INSERT INTO STATUS_DETAILS VALUES ('570', 'PP KEY RETRY IN PROGRESS');
INSERT INTO STATUS_DETAILS VALUES ('600', 'PP KEY TRANSACTION CANCELLED');

INSERT INTO SOURCE_DETAILS VALUES ('0-0','60','Paypoint-Internet', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('0-1','60','Paypoint-SMS', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('0-3','600','Paypoint-OTC', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('0-99','600','Paypoint-Unknown', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('1-0','60','BG-Internet', '3', '1');
INSERT INTO SOURCE_DETAILS VALUES ('1-1','60','BG-SMS', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('1-2','60','BG-Telephone', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('1-6','60','BG-IVR', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('1-7','60','BG-ISU', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('1-8','0','BG-Adjustment', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('1-99','60','BG-Unknown', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('2-3','600','Postoffice-OTC', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('2-99','600','Postoffice-Unknown', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('3-4','60','Smart Home Top Up-IHD', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('3-8','60','Smart Home Top Up-Sky TV', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('3-10','60','Smart Home Top Up - Greengage', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('3-99','60','Smart Home Top Up - Unknown', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('4-0','60','Payzone-Internet', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('4-1','60','Payzone-SMS', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('4-3','600','Payzone-OTC', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('4-99','600','Payzone-Unknown', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-0','60','Other-Internet', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-1','60','Other-SMS', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-2','60','Other-Telephone', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-3','600','Other-OTC', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-4','60','Other-IHD', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-5','60','Other-iphone', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-6','60','Other-IVR', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-7','60','Other-ISU', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-8','60','Other-Sky TV', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-9','60','Other-ATM', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-10','60','Other-Greengage', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-99','600','Other-Unknown', '', '');

INSERT INTO SOURCE_DETAILS VALUES ('0-0','60','Paypoint-Internet', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('0-1','60','Paypoint-SMS', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('0-3','600','Paypoint-OTC', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('0-99','600','Paypoint-Unknown', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('1-0','60','BG-Internet', '3', '1');
INSERT INTO SOURCE_DETAILS VALUES ('1-1','60','BG-SMS', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('1-2','60','BG-Telephone', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('1-6','60','BG-IVR', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('1-7','60','BG-ISU', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('1-8','0','BG-Adjustment', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('1-99','60','BG-Unknown', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('2-3','600','Postoffice-OTC', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('2-99','600','Postoffice-Unknown', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('3-4','60','Smart Home Top Up-IHD', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('3-8','60','Smart Home Top Up-Sky TV', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('3-10','60','Smart Home Top Up - Greengage', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('3-99','60','Smart Home Top Up - Unknown', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('4-0','60','Payzone-Internet', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('4-1','60','Payzone-SMS', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('4-3','600','Payzone-OTC', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('4-99','600','Payzone-Unknown', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-0','60','Other-Internet', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-1','60','Other-SMS', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-2','60','Other-Telephone', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-3','600','Other-OTC', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-4','60','Other-IHD', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-5','60','Other-iphone', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-6','60','Other-IVR', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-7','60','Other-ISU', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-8','60','Other-Sky TV', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-9','60','Other-ATM', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-10','60','Other-Greengage', '', '');
INSERT INTO SOURCE_DETAILS VALUES ('5-99','600','Other-Unknown', '', '');

INSERT INTO VMS_GROUP (GROUP_ID,GROUP_DESCRIPTION) VALUES ('G1','SUPER USER');
INSERT INTO VMS_GROUP (GROUP_ID,GROUP_DESCRIPTION) VALUES ('G2','SUPPORT');
INSERT INTO VMS_GROUP (GROUP_ID,GROUP_DESCRIPTION) VALUES ('G3','AGENT');
INSERT INTO VMS_GROUP (GROUP_ID,GROUP_DESCRIPTION) VALUES ('G4','HEADEND');

INSERT INTO VMS_FUNCTION (FUNCTION_CODE,FUNCTION_DESCRIPTION) VALUES ('00','HOME');
INSERT INTO VMS_FUNCTION (FUNCTION_CODE,FUNCTION_DESCRIPTION) VALUES ('01','CREATE VEND');
INSERT INTO VMS_FUNCTION (FUNCTION_CODE,FUNCTION_DESCRIPTION) VALUES ('02','CREATE ADJUSTMENT');
INSERT INTO VMS_FUNCTION (FUNCTION_CODE,FUNCTION_DESCRIPTION) VALUES ('03','VIEW VEND HISTORY');
INSERT INTO VMS_FUNCTION (FUNCTION_CODE,FUNCTION_DESCRIPTION) VALUES ('04','METER DETAILS');
INSERT INTO VMS_FUNCTION (FUNCTION_CODE,FUNCTION_DESCRIPTION) VALUES ('05','PRODUCTION SUPPORT UTILITY');
INSERT INTO VMS_FUNCTION (FUNCTION_CODE,FUNCTION_DESCRIPTION) VALUES ('06','POWER USER ADMIN PAGE');
INSERT INTO VMS_FUNCTION (FUNCTION_CODE,FUNCTION_DESCRIPTION) VALUES ('07','USER ADMIN PAGE');
INSERT INTO VMS_FUNCTION (FUNCTION_CODE,FUNCTION_DESCRIPTION) VALUES ('08','CHANGE PASSWORD');
INSERT INTO VMS_FUNCTION (FUNCTION_CODE,FUNCTION_DESCRIPTION) VALUES ('09','VEND REPORT UTILITY');
INSERT INTO VMS_FUNCTION (FUNCTION_CODE,FUNCTION_DESCRIPTION) VALUES ('12','CUSTOMER DETAILS');
INSERT INTO VMS_FUNCTION (FUNCTION_CODE,FUNCTION_DESCRIPTION) VALUES ('13','PREMISE DETAILS');
INSERT INTO VMS_FUNCTION (FUNCTION_CODE,FUNCTION_DESCRIPTION) VALUES ('20','LOG OFF');
INSERT INTO VMS_FUNCTION (FUNCTION_CODE,FUNCTION_DESCRIPTION) VALUES ('25', 'SOURCE DETAILS');

INSERT INTO VMS_USER (USER_ID,USERNAME,LAN_ID,GROUP_ID,RETRY_COUNT,LOCK_IND,SUPER_IND,PASSWORD_DATE,POWER_IND,CREATED_BY,UPDATED_BY,CREATED_TIMESTAMP,
UPDATED_TIMESTAMP,PASSWORD,VERSION) VALUES (SEQ_VMS_USER.NEXTVAL,'superuser','SUPERUSER','G1',0,'N','Y',SYSDATE,
'N','DBA','DBA',SYSDATE,SYSDATE,'vmstemp1',0);


INSERT INTO VMS_USERFUNCTION (ID,USER_ID,FUNCTION_CODE,GROUP_ID) VALUES (SEQ_VMS_USERFUNCTION.NEXTVAL,
SEQ_VMS_USER.CURRVAL,'06','G1');

INSERT INTO VMS_USERFUNCTION (ID,USER_ID,FUNCTION_CODE,GROUP_ID) VALUES (SEQ_VMS_USERFUNCTION.NEXTVAL,
SEQ_VMS_USER.CURRVAL,'01','G1');


INSERT INTO VMS_USERFUNCTION (ID,USER_ID,FUNCTION_CODE,GROUP_ID) VALUES (SEQ_VMS_USERFUNCTION.NEXTVAL,
SEQ_VMS_USER.CURRVAL,'03','G1');

INSERT INTO VMS_USERFUNCTION (ID,USER_ID,FUNCTION_CODE,GROUP_ID) VALUES (SEQ_VMS_USERFUNCTION.NEXTVAL,
SEQ_VMS_USER.CURRVAL,'04','G1');

INSERT INTO VMS_USERFUNCTION (ID,USER_ID,FUNCTION_CODE,GROUP_ID) VALUES (SEQ_VMS_USERFUNCTION.NEXTVAL, SEQ_VMS_USER.CURRVAL, '25', 'G2');

grant select, insert, update, delete on METER_DETAILS to PREPAY_APP_ROLE;
create public synonym METER_DETAILS for PREPAY_SCHEMA.METER_DETAILS;

grant select, insert, update, delete on CUSTOMER_DETAILS to PREPAY_APP_ROLE;
create public synonym CUSTOMER_DETAILS for PREPAY_SCHEMA.CUSTOMER_DETAILS;

grant select, insert, update, delete on PREMISE_DETAILS to PREPAY_APP_ROLE;
create public synonym PREMISE_DETAILS for PREPAY_SCHEMA.PREMISE_DETAILS;

grant select, insert, update, delete on VEND_CREDITID to PREPAY_APP_ROLE;
create public synonym VEND_CREDITID for PREPAY_SCHEMA.VEND_CREDITID;

grant select, insert, update, delete on STATUS_DETAILS to PREPAY_APP_ROLE;
create public synonym STATUS_DETAILS for PREPAY_SCHEMA.STATUS_DETAILS;

grant select, insert, update, delete on SOURCE_DETAILS to PREPAY_APP_ROLE;
create public synonym SOURCE_DETAILS for PREPAY_SCHEMA.SOURCE_DETAILS;


grant select, insert, update, delete on VEND_TRANSACTION to PREPAY_APP_ROLE;
create public synonym VEND_TRANSACTION for PREPAY_SCHEMA.VEND_TRANSACTION;

grant select, insert, update, delete on qrtz_job_details to PREPAY_APP_ROLE;
create public synonym qrtz_job_details for PREPAY_SCHEMA.qrtz_job_details;


grant select, insert, update, delete on qrtz_job_listeners to PREPAY_APP_ROLE;
create public synonym qrtz_job_listeners for PREPAY_SCHEMA.qrtz_job_listeners;

grant select, insert, update, delete on qrtz_triggers to PREPAY_APP_ROLE;
create public synonym qrtz_triggers for PREPAY_SCHEMA.qrtz_triggers;

grant select, insert, update, delete on qrtz_simple_triggers to PREPAY_APP_ROLE;
create public synonym qrtz_simple_triggers for PREPAY_SCHEMA.qrtz_simple_triggers;

grant select, insert, update, delete on qrtz_cron_triggers to PREPAY_APP_ROLE;
create public synonym qrtz_cron_triggers for PREPAY_SCHEMA.qrtz_cron_triggers;

grant select, insert, update, delete on qrtz_blob_triggers to PREPAY_APP_ROLE;
create public synonym qrtz_blob_triggers for PREPAY_SCHEMA.qrtz_blob_triggers;

grant select, insert, update, delete on qrtz_trigger_listeners to PREPAY_APP_ROLE;
create public synonym qrtz_trigger_listeners for PREPAY_SCHEMA.qrtz_trigger_listeners;


grant select, insert, update, delete on qrtz_calendars to PREPAY_APP_ROLE;
create public synonym qrtz_calendars for PREPAY_SCHEMA.qrtz_calendars;

grant select, insert, update, delete on qrtz_paused_trigger_grps to PREPAY_APP_ROLE;
create public synonym qrtz_paused_trigger_grps for PREPAY_SCHEMA.qrtz_paused_trigger_grps;

grant select, insert, update, delete on qrtz_fired_triggers to PREPAY_APP_ROLE;
create public synonym qrtz_fired_triggers for PREPAY_SCHEMA.qrtz_fired_triggers;

grant select, insert, update, delete on qrtz_scheduler_state to PREPAY_APP_ROLE;
create public synonym qrtz_scheduler_state for PREPAY_SCHEMA.qrtz_scheduler_state;

grant select, insert, update, delete on qrtz_locks to PREPAY_APP_ROLE;
create public synonym qrtz_locks for PREPAY_SCHEMA.qrtz_locks;

create public synonym VMS_FUNCTION for PREPAY_SCHEMA.VMS_FUNCTION;

GRANT select, insert, update, delete ON VMS_FUNCTION to PREPAY_APP_ROLE;

create public synonym VMS_GROUP for PREPAY_SCHEMA.VMS_GROUP;
GRANT select, insert, update, delete ON VMS_GROUP to PREPAY_APP_ROLE;

create public synonym VMS_USERFUNCTION for PREPAY_SCHEMA.VMS_USERFUNCTION;

GRANT select, insert, update, delete ON VMS_USERFUNCTION to PREPAY_APP_ROLE;

create public synonym SEQ_VMS_USERFUNCTION for PREPAY_SCHEMA.SEQ_VMS_USERFUNCTION;

GRANT SELECT ON SEQ_VMS_USERFUNCTION to PREPAY_APP_ROLE;


create public synonym SEQ_VMS_USER for PREPAY_SCHEMA.SEQ_VMS_USER;

GRANT SELECT ON SEQ_VMS_USER to PREPAY_APP_ROLE;


create public synonym VMS_USER for PREPAY_SCHEMA.VMS_USER;
GRANT select, insert, update, delete ON VMS_USER to PREPAY_APP_ROLE;

CREATE TABLE VMS_MESSAGINGSYSTEM (MESSAGE_ID INTEGER, MESSAGE_TYPE VARCHAR2 (30), MESSAGE_DATA VARCHAR2 (2300), PRIMARY KEY (MESSAGE_ID));
grant select, insert, update, delete on VMS_MESSAGINGSYSTEM to PREPAY_APP_ROLE;
CREATE PUBLIC SYNONYM SEQ_VMS_MESSAGINGSYSTEM FOR PREPAY_SCHEMA.SEQ_VMS_MESSAGINGSYSTEM;

CREATE BITMAP INDEX IDX_VENDTXN_M_CV_TT_VTSP ON VEND_TRANSACTION (MSN,CREDIT_VALUE,TRANSACTION_TYPE,VENDCODE_TIMESTAMP) TABLESPACE I_BGSM_PPY01;

CREATE BITMAP INDEX IDX_VENDTXN_STATUS ON VEND_TRANSACTION (STATUS,UPDATED_TIMESTAMP) TABLESPACE I_BGSM_PPY01;

CREATE BITMAP INDEX IDX ON VEND_CREDITID (MSN,TRANSACTION_TYPE) TABLESPACE I_BGSM_PPY01;
CREATE BITMAP INDEX IDX_VENDTXN_PAN ON VEND_TRANSACTION(PAN) TABLESPACE I_BGSM_PPY01;

CREATE INDEX IDX_MTRDETAILS_PAN ON METER_DETAILS(MSN) TABLESPACE I_BGSM_PPY01;
commit;

CREATE INDEX IDX_CUSTDETAILS_PAN ON CUSTOMER_DETAILS(PAN) TABLESPACE I_BGSM_PPY01;
commit;

CREATE SEQUENCE SEQ_VMS_PPKTXNSTATUS;

CREATE TABLE PPK_TRANSACTION
(
	TRANSACTION_ID 	VARCHAR2(20) NOT NULL,
	MSN 			VARCHAR2(30),
	MPXN 			VARCHAR2(20),
	PPKEY 			VARCHAR2(40),
	REQUEST_TIMESTAMP 	TIMESTAMP(6),
	UPDATE_TIMESTAMP 		TIMESTAMP(6),
	CREATED_BY 		VARCHAR2(20),
	UPDATED_BY 		VARCHAR2(20),
	TRIGGER_NAME 	VARCHAR2(50),
	CONSTRAINT PPK_TRANSACTION_PK PRIMARY KEY(“TRANSACTION_ID”)
);

CREATE TABLE PPK_STATUS_HISTORY
(
	PPK_STATUS_ID 	NUMBER  NOT NULL,
	TRANSACTION_ID 	VARCHAR2(20),
	STATUS 	NUMBER,
	UPDATED_TIMESTAMP 	TIMESTAMP(6),
	CONSTRAINT PPK_STATUS_PK PRIMARY KEY(“PPK_STATUS _ID”)
);

ALTER TABLE METER_DETAILS ADD COLUMN VEND_TRANSACTION_STATUS NUMBER (1);
	

